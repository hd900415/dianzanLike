/* 橘子科技旗下 A4源码  https://an4.net 搭建二开联系 QQ 3479863005  纸飞机联系 @orangetech */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-937f6d34"],{"0d13":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%","background-color":"#f5f6f9"}},[i("van-nav-bar",{staticStyle:{position:"absolute"},attrs:{border:!1,"left-arrow":""},on:{"click-left":function(e){return t.$emit("triggerPopup")}}}),i("div",{staticClass:"BillInfo"},[i("img",{attrs:{src:"./static/miliao/images/bill-list.png",width:"100%"}}),i("div",{staticClass:"top"},[i("div",{staticClass:"title"},[t.billInfo.header?i("img",{attrs:{src:"./static/miliao/images/headimg/"+t.billInfo.header,height:"24"}}):i("b",[t._v(t._s(t.billInfo.nick_name||"昵称"))]),i("span",[t._v(t._s(t.billInfo.nick_name||"昵称未设置")+"的红包")]),1==t.billInfo.type?i("van-tag",{attrs:{type:"warning"}},[t._v("拼")]):t._e()],1),i("h4",[t._v(t._s(t.billInfo.explain))]),!t.isPrivate&&t.billInfo.mymoney?i("div",{staticClass:"money"},[t._v(" "+t._s(t.billInfo.mymoney)),i("em",[t._v("元")])]):t._e()]),i("div",{staticClass:"list"},[i("div",{staticStyle:{height:"100%","overflow-y":"auto","overflow-x":"hidden"}},[t.isPrivate?i("div",{staticClass:"tip"},[t._v(t._s(t.billInfo.number)+"个红包共"+t._s(t.billInfo.money)+"元")]):i("div",{staticClass:"tip"},[t._v(t._s(t.billList.length==t.billInfo.number?t.billList.length+"个红包，已抢光":t.billList.length+"个红包"))]),t._l(t.billList,(function(e,o){return i("van-cell",{key:o,attrs:{value:e.money+"元"}},[i("div",{staticClass:"head",attrs:{slot:"icon"},slot:"icon"},[e.header?i("img",{attrs:{src:"./static/miliao/images/headimg/"+e.header,height:"24"}}):i("b",[t._v(t._s(e.nick_name||"昵称"))])]),i("template",{slot:"title"},[t._v(" "+t._s(e.nick_name||"昵称未设置")+" "),i("p",{staticClass:"time"},[t._v(t._s(e.time))])])],2)}))],2)])])],1)},s=[],a={name:"BillInfo",components:{},props:["billInfo","billList","isPrivate"],data(){return{}},computed:{},watch:{},created(){},mounted(){},activated(){},destroyed(){},methods:{}},d=a,l=(i("5add"),i("2877")),n=Object(l["a"])(d,o,s,!1,null,"ba1e473a",null);e["a"]=n.exports},"2f8e":function(t,e,i){},"3ddc":function(t,e,i){"use strict";var o=i("9388"),s=i.n(o);s.a},"5add":function(t,e,i){"use strict";var o=i("2f8e"),s=i.n(o);s.a},"625a":function(t,e,i){"use strict";(function(t){var o=i("e6ef"),s=i("9d8f"),a=i("ce97"),d=i("0d13"),l=i("72d1"),n=i("aed9"),c=i("28a2");e["a"]={name:"SendMsg",components:{Emoji:o["a"],ChatTool:s["a"],Bill:a["a"],BillInfo:d["a"],GroupMember:l["a"],VideoPlay:n["a"]},props:{},data(){return{isWsOk:!1,sendPost:{},chatType:Number(this.$route.query.chat_type),postData:{id:Number(this.$route.query.id||0),chat_type:1==Number(this.$route.query.chat_type)?1:2,password:"",page_no:1},pageNo:1,msgList:[],chatTitle:"",chatNum:"",showEmoji:!1,showChatTool:!1,cursorPos:{},msgCon:"",beforePullDown:!0,isPullingDown:!0,pullDownTxt:"消息加载成功",totalPage:1,posY:0,showPopup:!1,toolType:"friend",isResize:!1,groupNum:0,isSendCard:!0,showDialog:!1,validateCon:"我是"+localStorage["userNickName"],friendMid:"",isNotSay:!1,isGroupSay:!0,gOwnerId:0,isHistory:!1,msgVObj:document.getElementById("MsgVoice"),isVoice:1==localStorage["systemVoice"],showLongTap:!1,Socket:null,lockReconnect:!1,userUid:localStorage["userUid"]||(new Date).getTime(),contentType:1,userType:Number(localStorage["userType"]),groupPass:localStorage["groupPass"]?JSON.parse(localStorage["groupPass"]):[],groupId:"",isVisitor:!1,sendNo:0,isEdit:!1,isInView:!0,isScrollB:!1,showSend:!1,showVideo:!1,videoImg:"",videoId:"",videoUrl:"",showAt:!1,showBill:!1,billId:"",billInfo:"",billList:"",isRob:!0,isPrivate:!1,isLoading:!1,isDestroyed:!1,isAdmin:!1,msgToolAction:[{name:"删除此消息",id:1}],showMsgTool:!1,selectMsg:"",copyMsg:""}},computed:{},watch:{isVisitor(t){this.isEdit=!t},isNotSay(t){this.isEdit=!t},isGroupSay(t){this.isEdit=!0},isInView(t){t&&(this.chatNum=0)}},created(){this.isDestroyed=!1,this.createWebSocket(),this.$MiModel.GetGroupsInfo(this.postData.id,t=>{1!=t.info.user_type&&4!=t.info.user_type||(this.isAdmin=!0)})},mounted(){t("body").on("click","#MsgList .item .MsgBox",e=>{this.selectDid=t(e.currentTarget).data("id");const i=t(e.currentTarget).data("type");!this.isAdmin||1!=i||t(e.target).hasClass("photo")||t(e.target).hasClass("VideoBox")||(this.showMsgTool=!0)}),this.$MiUtil.LongTap("#MsgList .photo",e=>{this.selectDid=t(e.event.currentTarget).parent().data("id"),"click"==e.state?this.imagePreview=Object(c["a"])({images:[e.event.target.src],showIndex:!1}):this.showMsgTool=!0}),this.$MiUtil.LongTap("#MsgList .VideoBox",e=>{this.selectDid=t(e.event.currentTarget).parent().data("id"),"click"==e.state?(this.showVideo=!0,this.videoImg=t(event.target).find("img").attr("src"),this.videoUrl=t(event.target).data("url"),this.videoId=t(event.target).data("vid")):this.showMsgTool=!0}),t("body").on("click",".BillBox",e=>{this.isRob=!0,this.billId=t(e.currentTarget).data("id"),this.getBillInfo()}),t("body").on("click",".selectAt",e=>{var i=t(e.currentTarget).data("name"),o=t("<span>@"+i+"</span>").css({display:"none",fontSize:"16px"});t("body").append(o);var s=o.width()+"px";o.remove(),this.insertHtml('<input class="at" type="text" disabled value="@'+i+'" style="width:'+s+'">')}),t("body").on("blur","input,textarea,#EditBox",(function(){window.scrollTo(0,0)})),t(window).on("blur",()=>{this.isScrollB&&(this.isInView=!1)}),t("#ScrollWrap").scroll(()=>{var t=event.target.scrollTop,i=event.target.scrollHeight-event.target.clientHeight;t==i?(this.isScrollB=!0,this.isInView=!0):this.isScrollB=!1,t<i-10&&(this.isInView=!1),e(t,event.target.clientHeight)});var e=(e,i)=>{t('#MsgList dl[read="false"]').each((o,s)=>{var a=s.offsetTop+s.offsetHeight-20-e;a<i&&(t(s).attr("read","true"),this.chatNum-=1)})};t("body").on("click","#AddFriend",()=>{this.showDialog=!0}),t("body").on("click","#MsgList .photo",t=>{this.imagePreview=Object(c["a"])({images:[t.target.src],showIndex:!1})}),t("body").on("click",".van-image-preview",t=>{this.imagePreview.close()})},activated(){},destroyed(){this.isDestroyed=!0,this.isInView=!1,this.$toast.clear(),this.Socket&&this.Socket.close()},methods:{onSelectMsgTool(t){this.showMsgTool=!1,1==t.id&&this.$MiModel.DelRecord({gid:this.postData.id,id:this.selectDid},t=>{1==t.code&&this.getRecordList(!0)})},closeAt(){this.showAt=!1,document.getElementById("EditBox").focus()},onRefresh(){if(this.postData.page_no=this.pageNo+=1,this.pageNo>this.totalPage)return this.isLoading=!1,this.pullDownTxt="没有更多消息了",this.pageNo-=1,!1;this.initRecordList(this.chatType,e=>{if(this.totalPage=e.data_total_page,this.chatNum=e.is_see_num,this.isLoading=!1,1==e.code){this.pullDownTxt="消息加载成功";var i="";const s=e.list||[];for(var o=0;o<s.length;o++)i+='<dl class="'+(5==s[o].chat_type||6==s[o].chat_type?"item wrap":1!=s[o].is_send&&s[o].send_id!=this.userUid?"item":"item self")+'">'+(5!=s[o].chat_type&&6!=s[o].chat_type?"<dt>"+(s[o].header?'<img src="./static/miliao/images/headimg/'+s[o].header+'" width="100%">':"<b>"+(s[o].title?s[o].title.slice(0,2):"昵称")+"</b>")+"</dt>":"")+(5==s[o].chat_type||6==s[o].chat_type?'<dd><div class="notice">'+s[o].content+"</div></dd>":"<dd>"+(1!=s[o].is_send&&s[o].send_id!=this.userUid?'<div class="MsgTit">'+(s[o].title?s[o].title:"昵称未设置")+"，"+s[o].time+"</div>":'<div class="MsgTit">'+s[o].time+"</div>")+'<div data-type="'+s[o].content_type+'" data-id="'+s[o].id+'" class="MsgBox BillState'+(s[o].is_q||"")+(4==s[o].content_type||2==s[o].content_type||9==s[o].content_type||8==s[o].content_type?" NoBG":"")+'">'+s[o].content+"</div></dd>")+"</dl>";t("#MsgList").prepend(i)}else this.pullDownTxt="消息加载失败"})},getBillInfo(){this.$MiModel.GetUserInfo(),this.$MiModel.BillInfo(this.billId,t=>{1==t.code&&(2==t.info.type&&this.userUid==t.info.fuid&&(this.isPrivate=!0,this.isRob=!1),1==t.info.is_q&&(this.isRob=!1),this.billInfo=t.info,this.billList=t.hongbaolist||[],this.showBill=!0)})},robBill(){this.showBill=!1,this.$MiModel.RobBill(this.billId,t=>{1==t.code&&(this.getBillInfo(),this.getRecordList(!0))})},selectAt(e){this.showAt=!1;var i=t("<span>@"+e+"</span>").css({display:"none",fontSize:"16px"});t("body").append(i);var o=i.width()+"px";i.remove(),this.cursorPos.node.replaceData(this.cursorPos.offset-=1,1,""),this.insertHtml('<input class="at" type="text" disabled value="@'+e+'" style="width:'+o+'">')},closeChatInput(){this.showAt=!1,this.showSend=!1,document.getElementById("EditBox").blur(),this.showEmoji=!1,this.showChatTool=!1},refreshScroll(t){t.refresh(),t.scrollTo(0,t.maxScrollY)},createWebSocket(){this.getRecordList(),this.sendPost={id:this.postData.id,chat_type:this.postData.chat_type,content:"",content_type:1};try{"WebSocket"in window?this.Socket=new WebSocket(WsUrl):"MozWebSocket"in window?this.Socket=new MozWebSocket(WsUrl):this.$MiDialog.Alert("您的浏览器不支持WebSocket协议,建议使用新版谷歌、火狐等浏览器，请勿使用IE10以下浏览器，360浏览器请使用极速模式，不要使用兼容模式！"),this.$toast.loading({message:"通信连接中...",duration:0});var t={timeout:6e4,timeoutObj:null,reset:()=>{clearInterval(t.timeoutObj),t.start()},start:()=>{t.timeoutObj=setInterval(()=>{1==this.Socket.readyState&&this.Socket.send("ping")},t.timeout)}};this.Socket.onclose=t=>{console.log("连接关闭"),this.isDestroyed||this.reconnectWebSocket()},this.Socket.onerror=()=>{this.isWsOk=!1,console.log("连接错误")},this.Socket.onopen=e=>{console.log("连接成功"),t.start()},this.Socket.onmessage=e=>{var i=JSON.parse(e.data),o=i.type||"",s=this.postData.id;switch(o){case"init":1==this.postData.chat_type&&(s=this.userUid),this.sendPost.client_id=i.client_id,localStorage["clientId"]=i.client_id,1==this.chatType?this.$MiModel.BindUid({type:this.postData.chat_type,client_id:i.client_id,id:s},t=>{this.$toast.clear(),1==t.code?(this.isWsOk=!0,console.log("绑定成功")):this.reconnectWebSocket()}):this.$MiModel.GetUserInfo(t=>{t.code>200&&t.code<206&&(localStorage.removeItem("isLogin"),localStorage.removeItem("userUid"),localStorage.removeItem("userToken"),this.userUid=(new Date).getTime(),this.isVisitor=!0);var e={uid:this.userUid,header:t.info.header,name:t.info.nickname},i={sendType:"bind",id:s,userData:e};this.socketSend(i)});break;case"bind":console.log("绑定成功"),this.$toast.clear(),this.isWsOk=!0;break;case"close":console.log("连接关闭"),this.isWsOk=!1,this.isDestroyed||this.reconnectWebSocket();break;case"refresh":console.log("更新消息"),this.getRecordList(!0);break;default:console.log("收到消息");var a=JSON.parse(e.data);1==a.group_notsay&&(this.isGroupSay=!1),2==a.group_notsay&&(a.fid?a.fid==this.userUid?this.isNotSay=!0:this.isNotSay=!1:(this.isGroupSay=!0,this.isNotSay=!1)),3==a.group_notsay&&a.fid==this.userUid&&(this.$MiDialog.Alert("你已被移出该群",()=>{this.$router.replace("/miliao")}),this.isVisitor=!0),a.send_id!=this.userUid&&(this.isInView||(this.chatNum+=1)),this.appendMyMsg(a),t.reset()}}}catch(e){this.reconnectWebSocket()}},socketSend(t){var e=new Blob([JSON.stringify(t)]);this.Socket.send(e)},reconnectWebSocket(){this.lockReconnect||(this.lockReconnect=!0,this.isDestroyed?this.Socket&&this.Socket.close():setTimeout(()=>{this.createWebSocket(),this.lockReconnect=!1},2e3))},initRecordList(t,e){1==t?this.$MiModel.GetRecordList(this.postData,t=>{e(t)}):this.$MiModel.GetGroupRecordList(this.postData,t=>{e(t)})},getRecordList(e){this.postData.page_no=1,this.initRecordList(this.chatType,i=>{if(this.totalPage=i.data_total_page,this.chatTitle=i.tit,this.chatNum=i.is_see_num,1==this.chatType?(this.friendMid=i.mid,this.isEdit=!0):(this.groupNum=i.num||0,this.groupId=i.gid,this.isNotSay=6==i.state,this.isGroupSay=2==i.group_notsay,this.isSendCard=!!i.is_h_d,this.isVisitor=1==i.is_visitor,1==i.is_visitor?this.isEdit=!1:this.isEdit=!0),0==i.code||1==i.code)if(e){var o="";const e=i.list||[];for(var s=0;s<e.length;s++)o+='<dl class="'+(5==e[s].chat_type||6==e[s].chat_type?"item wrap":1!=e[s].is_send&&e[s].send_id!=this.userUid?"item":"item self")+'">'+(5!=e[s].chat_type&&6!=e[s].chat_type?"<dt>"+(e[s].header?'<img src="./static/miliao/images/headimg/'+e[s].header+'" width="100%">':"<b>"+(e[s].title?e[s].title.slice(0,2):"昵称")+"</b>")+"</dt>":"")+(5==e[s].chat_type||6==e[s].chat_type?'<dd><div class="notice">'+e[s].content+"</div></dd>":"<dd>"+(1!=e[s].is_send&&e[s].send_id!=this.userUid?'<div class="MsgTit">'+(e[s].title?e[s].title:"昵称未设置")+"，"+e[s].time+"</div>":'<div class="MsgTit">'+e[s].time+"</div>")+'<div data-type="'+e[s].content_type+'" data-id="'+e[s].id+'" class="MsgBox BillState'+(e[s].is_q||"")+(4==e[s].content_type||2==e[s].content_type||9==e[s].content_type||8==e[s].content_type?" NoBG":"")+'">'+e[s].content+"</div></dd>")+"</dl>";t("#MsgList").html(o)}else this.msgList=i.list||[];else this.$MiDialog.Alert(i.code_dec,()=>{this.onClickBack()});this.$nextTick(()=>{var e,i=[],o=[],s=0;if(t(".photo,.video").each((function(t,e){o.push(e.src)})),e=o.length,e)for(var a=0;a<e;a++)i[a]=new Image,i[a].src=o[a],i[a].onerror=t=>{s++,s==e&&this.scrollBottom()},i[a].onload=t=>{s++,s==e&&this.scrollBottom()};else this.scrollBottom()})})},onClickBack(){localStorage["MiLogin"]?this.$router.go(-1):this.$router.push("/"),this.$route.params.isBack=!0},setCursorPos(t){const e=t||window.getSelection();this.cursorPos={node:e.anchorNode,offset:e.anchorOffset}},editChat(t){if("insertParagraph"===t.inputType)t.target.innerHTML=t.target.innerHTML.replace("<div><br></div>",""),"<div><br></div>"!==t.target.innerHTML&&this.sendMsg();else{this.msgCon=t.target.innerHTML,this.setCursorPos();var e=this.cursorPos.node.nodeValue;e&&"@"==e.slice(-1)?2==this.chatType&&(this.showAt=!0,document.getElementById("EditBox").blur()):this.showAt=!1}},onClickEdit(t){this.isVisitor?this.$MiDialog.Alert("你不是该群成员，不能发言"):this.isGroupSay?this.isNotSay?this.$MiDialog.Alert("你在该群已经被禁言，不能发送消息"):(this.showEmoji=!1,this.showChatTool=!1,this.setCursorPos()):this.$MiDialog.Alert("该群已禁言，不能发送消息")},onClickEmoji(){if(this.isVisitor)return void this.$MiDialog.Alert("你不是该群成员，不能发言");if(!this.isGroupSay)return void this.$MiDialog.Alert("该群已禁言，不能发送消息");if(this.isNotSay)return void this.$MiDialog.Alert("你在该群已经被禁言，不能发送消息");this.showEmoji=!this.showEmoji,this.showChatTool=!1;const t=window.getSelection();t.collapse(this.cursorPos.node,this.cursorPos.offset),document.getElementById("EditBox").focus()},onClickChatTool(){this.showSend=!1,this.isVisitor?this.$MiDialog.Alert("你不是该群成员，不能发言"):this.isGroupSay?this.isNotSay?this.$MiDialog.Alert("你在该群已经被禁言，不能发送消息"):(this.showChatTool=!this.showChatTool,this.showEmoji=!1,document.getElementById("EditBox").blur()):this.$MiDialog.Alert("该群已禁言，不能发送消息")},insertHtml(t){var e,i;if(window.getSelection().collapse(this.cursorPos.node,this.cursorPos.offset),document.getElementById("EditBox").focus(),window.getSelection){if(e=window.getSelection(),e.getRangeAt&&e.rangeCount){i=e.getRangeAt(0),i.deleteContents();var o=document.createElement("div");o.innerHTML=t;var s,a,d=document.createDocumentFragment();while(s=o.firstChild)a=d.appendChild(s);i.insertNode(d),a&&(i=i.cloneRange(),i.setStartAfter(a),i.collapse(!0),e.removeAllRanges(),e.addRange(i))}this.setCursorPos(e)}else document.selection&&"Control"!=document.selection.type?document.selection.createRange().pasteHTML(t):this.$toast("你的浏览器不支持");this.msgCon=this.isEdit?document.getElementById("EditBox").innerHTML:""},sendMsg(){this.msgCon=document.getElementById("EditBox").innerHTML,this.msgCon?this.sendRecord(this.msgCon,this.contentType):(this.setCursorPos(),document.getElementById("EditBox").focus())},sendRecord(e,i,o){if(this.isWsOk)if(this.isVisitor)this.$MiDialog.Alert("你不是该群成员，不能发言");else if(this.isGroupSay)if(this.isNotSay)this.$MiDialog.Alert("你在该群已经被禁言，不能发送消息");else{if(this.isInView=!0,3!=i){t("#MsgState").remove();var s='<dl id="MsgState" class="item self"><dd><div class="state"><i class="van-loading__spinner van-loading__spinner--circular"><svg viewBox="25 25 50 50" class="van-loading__circular"><circle cx="50" cy="50" r="20" fill="none"></circle></svg></i><span>正在发送...</span></div></dd></dl>';t("#MsgList").append(s)}if(this.sendPost.content=e,this.sendPost.content_type=i,o?this.sendPost.hb_id=o:delete this.sendPost.hb_id,1==this.chatType)this.$MiModel.SendRecord(this.sendPost,e=>{if(0==e.code)t("#MsgState .state").html('<i class="van-icon van-icon-fail"></i><span>发送失败</span>'),setTimeout(()=>{t("#MsgState").remove()},2e3);else if(7==e.code&&this.reconnectWebSocket(),t("#EditBox").empty(),t("#MsgState").remove(),this.cursorPos={},this.msgCon="",4==e.code){var i='<dl class="item wrap"><dd><div class="notice" id="AddFriend">你还不是'+this.chatTitle+"的朋友，成为朋友后才能聊天。<p><i>点击这里马上发送好友申请</i></p></div></dd></dl>";t("#MsgList").append(i)}else this.appendMyMsg(e.message)});else{var a=this.sendPost;a.uid=this.userUid,a.sendType="chat",this.socketSend(a),t("#EditBox").empty(),t("#MsgState").remove(),this.cursorPos={},this.msgCon="",this.$MiModel.SendRecord(this.sendPost)}2!=i&&9!=i&&(document.getElementById("EditBox").focus(),this.setCursorPos())}else this.$MiDialog.Alert("该群已禁言，不能发送消息");else this.$MiDialog.Alert("聊天通信未接通，无法发送信息")},appendMyMsg(e){e.send_id!=this.userUid&&this.isVoice&&this.msgVObj.play();var i='<dl read="'+this.isInView+'" class="'+(5==e.chat_type||6==e.chat_type?"item wrap":1!=e.is_send&&e.send_id!=this.userUid?"item":"item self")+'">'+(5!=e.chat_type&&6!=e.chat_type?"<dt>"+(e.header?'<img src="./static/miliao/images/headimg/'+e.header+'" width="100%">':"<b>"+(e.title?e.title.slice(0,2):"昵称")+"</b>")+"</dt>":"")+(5==e.chat_type||6==e.chat_type?'<dd><div class="notice">'+e.content+"</div></dd>":"<dd>"+(1!=e.is_send&&e.send_id!=this.userUid?'<div class="MsgTit">'+(e.title?e.title:"昵称未设置")+"，"+e.time+"</div>":'<div class="MsgTit">'+e.time+"</div>")+'<div data-type="'+e.content_type+'" data-id="'+e.id+'" class="MsgBox BillState'+(e.is_q||"")+(4==e.content_type||2==e.content_type||9==e.content_type||8==e.content_type?" NoBG":"")+'">'+e.content+"</div></dd>")+"</dl>";t("#MsgList").append(i),this.scrollBottom(e.content)},scrollBottom(e){if(this.isInView){var i=document.getElementById("ScrollWrap");try{if("IMG"==t(e)[0].nodeName){var o=new Image;o.src=t(e)[0].src,o.onerror=t=>{t.scrollTop=t.scrollHeight},o.onload=()=>{i.scrollTop=i.scrollHeight}}else if("IMG"==t(e).find("img")[0].nodeName){o=new Image;o.src=t(e).find("img")[0].src,o.onerror=t=>{t.scrollTop=t.scrollHeight},o.onload=()=>{i.scrollTop=i.scrollHeight}}else i.scrollTop=i.scrollHeight}catch(s){i.scrollTop=i.scrollHeight}}},triggerPopup(t,e,i){this.showPopup=!1,t&&this.sendRecord(e,i)},getToolType(t){this.showPopup=!0,this.toolType=t},chatSet(t){1==t&&this.$router.push({name:"friendChatSet",query:{id:this.postData.id}}),2==t&&this.$router.push({name:"groupChatSet",query:{id:this.postData.id}})},addFriend(){this.$MiModel.AddFriends(this.friendMid,this.validateCon,t=>{this.$MiDialog.Alert(t.code_dec)})},setRead(){this.$MiModel.SeeAllRecord({id:this.postData.id,type:this.chatType},t=>{1==t.code&&(this.chatNum=0,this.$MiModel.GetUserData())})}}}}).call(this,i("1157"))},"72d1":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"AtMember DisplayFlex"},[i("van-nav-bar",{attrs:{title:"选择提醒的人",border:!1,"left-arrow":""},on:{"click-left":function(e){return t.$emit("triggerPopup")}}}),i("div",{staticClass:"list"},t._l(t.GroupMember,(function(e){return i("van-cell",{key:e.id,attrs:{title:e.nickname||"昵称未设置"},on:{click:function(i){return t.$emit("selectAt",e.nickname||"昵称未设置")}}},[i("template",{slot:"icon"},[e.header?i("img",{staticClass:"head",attrs:{src:"./static/miliao/images/headimg/"+e.header}}):i("b",{staticClass:"head"},[t._v(t._s(e.nickname||"昵称"))])])],2)})),1)],1)},s=[],a={name:"GroupsMember",components:{},props:["groupId"],data(){return{}},computed:{},watch:{},created(){this.$MiModel.GroupsMember(this.groupId)},mounted(){},activated(){},destroyed(){},methods:{}},d=a,l=(i("3ddc"),i("2877")),n=Object(l["a"])(d,o,s,!1,null,"55a6ea74",null);e["a"]=n.exports},7303:function(t,e,i){"use strict";var o=i("b854"),s=i.n(o);s.a},"91f9":function(t,e,i){"use strict";var o=i("9fa6"),s=i.n(o);s.a},9388:function(t,e,i){},"9d8f":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ChatTool"},[i("ul",[i("li",{on:{click:function(e){return t.$emit("getToolType","bill")}}},[i("van-icon",{attrs:{name:"bill"}}),i("p",[t._v("红包")])],1),i("li",[i("van-uploader",{attrs:{"after-read":t.onReadImg,accept:"image/*"}},[i("van-icon",{attrs:{name:"photo"}})],1),i("p",[t._v("图片")])],1),i("li",[i("van-uploader",{attrs:{"after-read":t.onReadVideo,accept:"video/*"}},[i("van-icon",{attrs:{name:"video"}})],1),i("p",[t._v("视频")])],1)]),i("van-popup",{staticStyle:{height:"100%",width:"100%"},attrs:{overlayStyle:{backgroundColor:"transparent"}},model:{value:t.showUp,callback:function(e){t.showUp=e},expression:"showUp"}},[i("UploadAuth")],1)],1)},s=[],a={name:"ChatTool",components:{},props:["id","chat_type","card","goid","isNotSay"],data(){return{isGowner:!1,showUp:!1,file:null,uploadDisabled:!0,resumeDisabled:!0,pauseDisabled:!0,uploader:null,statusText:"",progressToast:null,imageUrl:""}},computed:{},watch:{},created(){this.goid==localStorage["userUid"]&&(this.isGowner=!0)},mounted(){},activated(){},destroyed(){},methods:{onOverSize(){this.$MiDialog.Alert("发送图片最大3M，请重新选择")},onReadImg(t){this.isNotSay?this.$MiDialog.Alert("你在该群已经被禁言，不能发送消息"):this.fileChange(t.file,"img")},onReadVideo(t){this.isNotSay?this.$MiDialog.Alert("你在该群已经被禁言，不能发送消息"):this.fileChange(t.file)},openSitePage(t){var e=localStorage["siteMedia"];if(localStorage["siteToken"]){var i="/";"recharge"==t&&(i="mobile"==e?"/user/rechargeWay":"/recharge"),"withdraw"==t&&(i="mobile"==e?"/user/withdraw":"/withdraw"),"betrecord"==t&&(i="mobile"==e?"/user/betRecord":"/betRecord"),window.parent.postMessage({jump:!0,page:i},"*")}else this.$MiDialog.Alert("你的彩票平台未接入该功能")},fileChange(t,e){this.uploader&&(this.uploader.stopUpload(),this.statusText=""),this.uploader=this.createUploader(e),this.uploader.addFile(t,null,null,null,""),this.uploadDisabled=!1,this.pauseDisabled=!0,this.resumeDisabled=!0},authUpload(){null!==this.uploader&&(this.uploader.startUpload(),this.uploadDisabled=!0,this.pauseDisabled=!1)},pauseUpload(){null!==this.uploader&&(this.uploader.stopUpload(),this.resumeDisabled=!1,this.pauseDisabled=!0)},resumeUpload(){null!==this.uploader&&(this.uploader.startUpload(),this.resumeDisabled=!0,this.pauseDisabled=!1)},createUploader(t){let e=this,i=new AliyunUpload.Vod({timeout:Alivod.timeout||6e4,partSize:Alivod.partSize||1048576,parallel:Alivod.parallel||5,retryCount:Alivod.retryCount||3,retryDuration:Alivod.retryDuration||2,region:Alivod.region,userId:Alivod.userId,addFileSuccess:function(t){e.uploadDisabled=!1,e.resumeDisabled=!1,e.$toast.loading({message:"等待上传...",forbidClick:!0,duration:0}),console.log("addFileSuccess: "+t.file.name),e.authUpload()},onUploadstarted:function(o){t?o.ImageId?e.$MiModel.CreateUploadImage(t=>{let s=t.UploadAuth,a=t.UploadAddress,d=t.ImageId;e.imageUrl=t.ImageURL,i.setUploadAuthAndAddress(o,s,a,d)}):(e.$MiModel.CreateUploadImage(t=>{let s=t.UploadAuth,a=t.UploadAddress,d=t.ImageId;e.imageUrl=t.ImageURL,i.setUploadAuthAndAddress(o,s,a,d)}),e.statusText="文件开始上传...",console.log("onUploadStarted:"+o.file.name+", endpoint:"+o.endpoint+", bucket:"+o.bucket+", object:"+o.object)):o.videoId?e.$MiModel.RefreshUploadVideo({VideoId:o.videoId},t=>{let e=t.UploadAuth,s=t.UploadAddress,a=t.VideoId;i.setUploadAuthAndAddress(o,e,s,a)}):(e.$MiModel.CreateUploadVideo({Title:localStorage["userMid"]+"-"+e.$MiUtil.DateFormat("YYMMDDhhmmss",new Date),FileName:o.file.name},t=>{let e=t.UploadAuth,s=t.UploadAddress,a=t.VideoId;i.setUploadAuthAndAddress(o,e,s,a)}),e.statusText="文件开始上传...",console.log("onUploadStarted:"+o.file.name+", endpoint:"+o.endpoint+", bucket:"+o.bucket+", object:"+o.object))},onUploadSucceed:function(i){if(console.log("onUploadSucceed: "+i.file.name+", endpoint:"+i.endpoint+", bucket:"+i.bucket+", object:"+i.object),t){e.$toast.success("图片上传成功");const t=e.imageUrl.slice(0,e.imageUrl.indexOf("?")),i=`<img class="photo" src="${t}">`;e.$emit("sendRecord",i,2)}else e.$toast.loading({message:"正在获取视频封面...",forbidClick:!0,duration:0}),e.getUploadDetails(i.videoId)},onUploadFailed:function(t,i,o){console.log("onUploadFailed: file:"+t.file.name+",code:"+i+", message:"+o),e.statusText="文件上传失败!",e.$toast.fail("文件上传失败")},onUploadCanceled:function(t,i,o){console.log("Canceled file: "+t.file.name+", code: "+i+", message:"+o),e.$toast.fail("文件已暂停上传")},onUploadProgress:function(t,i,o){let s=Math.ceil(100*o)+"%";1==o&&e.$toast.clear(),e.progressToast?e.progressToast.message="已上传"+s:e.progressToast=e.$toast.loading({message:"已上传"+s,forbidClick:!0,duration:0})},onUploadTokenExpired:function(t){e.$MiModel.RefreshUploadVideo({VideoId:t.videoId},t=>{let e=t.UploadAuth;i.resumeUploadWithAuth(e),console.log("upload expired and resume upload with uploadauth "+e)}),e.$toast.fail("文件超时")},onUploadEnd:function(t){console.log("onUploadEnd: uploaded all the files")}});return i},getPlayInfo(t){try{this.$MiModel.GetPlayInfo({VideoId:t},e=>{if(e.VideoBase.CoverURL){this.$toast.success("视频上传成功");const t=e.PlayInfoList.PlayInfo[0].PlayURL.slice(0,e.PlayInfoList.PlayInfo[0].PlayURL.indexOf("?")),i=e.VideoBase.CoverURL.slice(0,e.VideoBase.CoverURL.indexOf("?")),o=`<div class='VideoBox' data-url="${t}" data-vid="${e.VideoBase.VideoId}"><img class="video" src="${i}"><i class="play-btn van-icon van-icon-play-circle"></i><p>${this.$MiUtil.TimeFormat(e.VideoBase.Duration)}</p></div>`;this.$emit("sendRecord",o,8)}else setTimeout(()=>{this.getPlayInfo(t)},2e3)})}catch(e){setTimeout(()=>{this.getPlayInfo(t)},2e3)}},getUploadDetails(t){this.$MiModel.GetUploadDetails({MediaIds:t},e=>{"Normal"==e.UploadDetails[0].Status?this.getPlayInfo(t):setTimeout(()=>{this.getUploadDetails(t)},2e3)})}}},d=a,l=i("2877"),n=Object(l["a"])(d,o,s,!1,null,null,null);e["a"]=n.exports},"9fa6":function(t,e,i){},aed9:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"VideoPlay"},[i("div",{attrs:{id:"VideoPlay"}})])}],a={name:"VideoPlay",components:{},props:["videoImg","videoUrl","videoId"],data(){return{}},computed:{},watch:{},created(){},mounted(){const t={id:"VideoPlay",width:"100%",height:"100%",cover:this.videoImg,preload:!0,autoPlayDelay:3,autoPlayDelayDisplayText:"请等待...",controlBarVisibility:"always",skinLayout:[{name:"bigPlayButton",align:"cc"},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"cc"},{name:"infoDisplay"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:5,y:15},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:5,y:15},{name:"setting",align:"tr",x:5,y:15},{name:"volume",align:"tr",x:5,y:15},{name:"snapshot",align:"tr",x:5,y:12}]}]};this.videoUrl?(t.source=this.videoUrl,this.initPlay(t)):(t.vid=this.videoId,this.$MiModel.GetVideoPlayAuth({VideoId:this.videoId},e=>{t.playauth=e.PlayAuth,this.$nextTick(()=>{this.initPlay(t)})}))},activated(){},destroyed(){},methods:{initPlay(t){const e=new Aliplayer(t,t=>{console.log("The player is created")});e.on("snapshoted",t=>{var e=t.paramData.base64,i=document.createElement("a");i.setAttribute("href",e);var o="Aliplayer"+Date.now()+".png";i.setAttribute("download",o),i.click(),e=null})}}},d=a,l=(i("7303"),i("2877")),n=Object(l["a"])(d,o,s,!1,null,null,null);e["a"]=n.exports},b854:function(t,e,i){},bbfc:function(t,e,i){"use strict";var o=i("e211"),s=i.n(o);s.a},bf13:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"Main Background DisplayFlex"},[i("van-nav-bar",{staticClass:"NavBar",attrs:{title:t.chatTitle,border:!1},on:{"click-left":t.onClickBack}},[i("img",{staticClass:"icon-left",attrs:{slot:"left",src:"./static/miliao/icon/icon-back.svg"},slot:"left"}),i("img",{staticClass:"icon-right",attrs:{slot:"right",src:"./static/miliao/icon/icon-menu.svg"},on:{click:function(e){return t.chatSet(t.postData.chat_type)}},slot:"right"})]),t.chatNum?i("a",{staticClass:"ChatTips",attrs:{href:"javascript:;"},on:{click:t.setRead}},[t._v(t._s(t.chatNum)+" 条未读消息 点击标记全部已读")]):t._e(),i("div",{ref:"Scroll",staticClass:"Scroll-Wrap",attrs:{id:"ScrollWrap"},on:{click:t.closeChatInput}},[i("van-pull-refresh",{attrs:{"pulling-text":"下拉加载更多消息","loosing-text":"释放即刻加载","success-text":t.pullDownTxt},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("div",{staticClass:"MsgList",attrs:{id:"MsgList"}},t._l(t.msgList,(function(e,o){return i("dl",{key:e.id,staticClass:"item",class:5==e.chat_type||6==e.chat_type?"wrap":1!=e.is_send&&e.send_id!=t.userUid?"":"self"},[5!=e.chat_type&&6!=e.chat_type?i("dt",[e.header?i("img",{attrs:{src:"./static/miliao/images/headimg/"+e.header,width:"100%"}}):i("b",[t._v(t._s(e.title?e.title.slice(0,2):"昵称"))])]):t._e(),5==e.chat_type||6==e.chat_type?i("dd",[i("div",{staticClass:"notice"},[t._v(t._s(e.content))])]):i("dd",[1!=e.is_send&&e.send_id!=t.userUid?i("div",{staticClass:"MsgTit"},[t._v(t._s(e.title?e.title:"昵称未设置")+"，"+t._s(e.time))]):i("div",{staticClass:"MsgTit"},[t._v(t._s(e.time))]),i("div",{class:"MsgBox BillState"+(e.is_q||"")+(4==e.content_type||2==e.content_type||9==e.content_type||8==e.content_type?" NoBG":""),attrs:{"data-type":e.content_type,"data-id":e.id},domProps:{innerHTML:t._s(e.content)}})])])})),0)])],1),i("van-cell-group",{staticClass:"ChatInput"},[i("van-cell",{staticClass:"ChatEdit",attrs:{border:!1}},[i("van-icon",{attrs:{slot:"icon",name:"smile-o"},on:{click:t.onClickEmoji},slot:"icon"}),i("div",{staticClass:"ViewHtml",staticStyle:{"-webkit-user-select":"text"},attrs:{slot:"title",contenteditable:t.isEdit,id:"EditBox"},on:{input:t.editChat,click:t.onClickEdit},slot:"title"}),t.msgCon?i("van-button",{attrs:{slot:"right-icon",size:"small",round:"",type:"primary"},on:{click:t.sendMsg},slot:"right-icon"},[t._v("发送")]):i("van-icon",{attrs:{slot:"right-icon",name:"add-o"},on:{click:t.onClickChatTool},slot:"right-icon"})],1),t.showEmoji?i("Emoji",{on:{insertHtml:t.insertHtml}}):t._e(),t.showChatTool?i("ChatTool",{attrs:{id:t.postData.id,chat_type:t.postData.chat_type,card:t.isSendCard,goid:t.gOwnerId,isNotSay:t.isNotSay},on:{getToolType:t.getToolType,sendRecord:t.sendRecord}}):t._e()],1),i("van-popup",{staticClass:"SetPopup",attrs:{position:"bottom",overlay:!1,"lock-scroll":!1},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},["bill"==t.toolType?i("Bill",{attrs:{chatId:t.postData.id,chatType:t.chatType},on:{sendRecord:t.sendRecord,triggerPopup:t.triggerPopup}}):t._e()],1),i("van-popup",{staticStyle:{background:"none",height:"100%",width:"100%"},attrs:{"close-on-click-overlay":!1,overlayStyle:{backgroundColor:"rgba(255,255,255,.6)"}},model:{value:t.showBill,callback:function(e){t.showBill=e},expression:"showBill"}},[t.isRob?i("div",{staticClass:"RobBill",class:{none:2==t.billInfo.is_q}},[0==t.billInfo.is_q?i("a",{staticClass:"rob",attrs:{href:"javascript:;"},on:{click:t.robBill}}):t._e(),i("dl",[i("dt",[t.billInfo.header?i("img",{attrs:{src:"./static/miliao/images/headimg/"+t.billInfo.header,height:"24"}}):i("b",[t._v(t._s(t.billInfo.nick_name||"昵称"))]),i("span",[t._v(t._s(t.billInfo.nick_name||"昵称未设置")+"的红包")])]),i("dd",[t._v(t._s(2==t.billInfo.is_q?"手慢了，红包派完了":t.billInfo.explain))])]),2==t.billInfo.is_q?i("a",{staticClass:"href",attrs:{href:"javascript:;"},on:{click:function(e){t.isRob=!1}}},[t._v("看看大家的手气"),i("van-icon",{attrs:{name:"arrow"}})],1):t._e(),i("van-icon",{staticClass:"close",attrs:{name:"close"},on:{click:function(e){t.showBill=!1}}})],1):i("BillInfo",{attrs:{billInfo:t.billInfo,billList:t.billList,isPrivate:t.isPrivate},on:{triggerPopup:function(e){t.showBill=!1}}})],1),i("van-popup",{staticStyle:{background:"none",width:"100%",height:"100%"},attrs:{closeable:"",overlayStyle:{backgroundColor:"rgba(0,0,0,.9)"}},model:{value:t.showVideo,callback:function(e){t.showVideo=e},expression:"showVideo"}},[t.showVideo?i("VideoPlay",{attrs:{videoImg:t.videoImg,videoUrl:t.videoUrl,videoId:t.videoId}}):t._e()],1),i("van-dialog",{staticClass:"D-confirm",staticStyle:{width:"80%"},attrs:{title:"添加密友","message-align":"center","show-cancel-button":"","confirm-button-text":"发送"},on:{confirm:t.addFriend},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[i("div",{staticClass:"van-dialog__message",staticStyle:{"font-weight":"400"}},[t._v(" 填写验证信息，并发送申请添加好友。 "),i("van-field",{staticStyle:{border:"1px #ddd solid",padding:"5px 10px","margin-top":"10px"},attrs:{placeholder:"请输入验证内容"},model:{value:t.validateCon,callback:function(e){t.validateCon=e},expression:"validateCon"}})],1)]),i("van-popup",{staticStyle:{height:"100%",width:"100%"},attrs:{overlayStyle:{backgroundColor:"transparent"}},model:{value:t.showAt,callback:function(e){t.showAt=e},expression:"showAt"}},[i("GroupMember",{attrs:{groupId:t.postData.id},on:{selectAt:t.selectAt,triggerPopup:t.closeAt}})],1),i("van-action-sheet",{attrs:{actions:t.msgToolAction},on:{select:t.onSelectMsgTool},model:{value:t.showMsgTool,callback:function(e){t.showMsgTool=e},expression:"showMsgTool"}})],1)},s=[],a=i("625a"),d=a["a"],l=(i("91f9"),i("2877")),n=Object(l["a"])(d,o,s,!1,null,"86f89e80",null);e["default"]=n.exports},ce97:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"SetBox",on:{click:t.checkMoney}},[i("van-nav-bar",{attrs:{title:"发红包",border:!1,"left-arrow":""},on:{"click-left":function(e){return t.$emit("triggerPopup")}}}),i("div",{staticClass:"Bill"},[i("div",{staticStyle:{padding:"0 15px 15px"}},[i("p",{staticClass:"tip"},[t._v("账户资金:￥"+t._s(Number(t.UserInfo.balance)))]),i("van-field",{attrs:{size:"large","input-align":"right",type:"number",label:1==t.postData.type?"总金额":"单个金额",placeholder:"0.00"},on:{click:function(e){t.showKeyboard=!0,t.keyboardType=1}},model:{value:t.billPrice,callback:function(e){t.billPrice=e},expression:"billPrice"}},[1==t.postData.type?i("template",{slot:"left-icon"},[i("van-tag",{attrs:{type:"warning"}},[t._v("拼")])],1):t._e(),i("template",{slot:"right-icon"},[t._v("元")])],2),1!=t.chatType?i("p",{staticClass:"tip",staticStyle:{color:"#333"}},[t._v("当前为"+t._s(1==t.postData.type?"拼手气红包":"普通红包")+"，"),1==t.postData.type?i("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.postData.type=2}}},[t._v("改为普通红包")]):i("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.postData.type=1}}},[t._v("改为拼手气红包")])]):t._e(),1!=t.chatType?i("div",{staticClass:"mt20"},[i("van-field",{attrs:{size:"large","input-align":"right",type:"tel",label:"红包个数",placeholder:"填写个数"},on:{click:function(e){t.showKeyboard=!0,t.keyboardType=2}},model:{value:t.postData.number,callback:function(e){t.$set(t.postData,"number",e)},expression:"postData.number"}},[i("template",{slot:"right-icon"},[t._v("个")])],2)],1):t._e(),i("van-field",{staticClass:"mt20",attrs:{type:"textarea",maxlength:"50",placeholder:"恭喜发财"},model:{value:t.billExplain,callback:function(e){t.billExplain=e},expression:"billExplain"}}),i("div",{staticClass:"total"},[i("em",[t._v("￥")]),t._v(t._s(t.postData.money)+" ")]),i("van-button",{staticStyle:{"font-size":"16px"},attrs:{type:"danger",block:"",disabled:t.btnDis},on:{click:t.sendBill}},[t._v("塞钱进红包")])],1)]),i("van-number-keyboard",{attrs:{show:t.showKeyboard,theme:"custom","extra-key":1==t.keyboardType?".":"","close-button-text":"完成"},on:{blur:function(e){t.showKeyboard=!1},input:t.onInput,delete:t.onDelete}})],1)},s=[],a={name:"Bill",components:{},props:["chatType","chatId"],data(){return{billPrice:"",billExplain:"",postData:{money:"0.00",number:"",type:1==this.chatType?2:1,explain:"",sitetoken:localStorage["Token"]},showKeyboard:!1,keyboardType:1,btnDis:!0}},computed:{},watch:{},created(){this.$Model.GetUserInfo(),1==this.chatType?(this.postData.number=1,this.postData.fid=this.chatId):this.postData.group_id=this.chatId},mounted(){},activated(){},destroyed(){},methods:{sendBill(){var t=`<p style="font-weight:300;margin-bottom:20px">密聊红包</p>￥<em style="font-size:28px">${this.postData.money}</em>`;this.$MiDialog.Alert(t,()=>{this.postData.explain=this.billExplain||"恭喜发财",this.$MiModel.SendBill(this.postData,t=>{1==t.code&&(this.$emit("sendRecord",`<div class="BillBox" data-id="${t.hb_id}"><div class="info"><i class="icon"></i><span>${this.postData.explain}<p></p></span></div><p>密聊红包</p></div>`,9,t.hb_id),this.$emit("triggerPopup"),this.$Model.GetUserInfo())})},"确认支付")},checkMoney(){this.billPrice&&(this.postData.money=Number(this.billPrice).toFixed(2)),this.postData.number&&this.billPrice?(this.btnDis=!1,2==this.postData.type&&(this.postData.money=(this.billPrice*this.postData.number).toFixed(2))):this.btnDis=!0},onInput(t){1==this.keyboardType&&(this.billPrice+=t),2==this.keyboardType&&(this.postData.number+=t)},onDelete(){1==this.keyboardType&&(this.billPrice=this.billPrice.slice(0,this.billPrice.length-1)),2==this.keyboardType&&(this.postData.number=this.postData.number.slice(0,this.postData.number.length-1))}}},d=a,l=(i("bbfc"),i("2877")),n=Object(l["a"])(d,o,s,!1,null,"579afdcf",null);e["a"]=n.exports},e211:function(t,e,i){},e6ef:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"EmojiBox"},[t._l(t.emojiData,(function(e){return e.type==t.emojiType?i("van-swipe",{key:e.type,staticClass:"EmojiSwipe",attrs:{loop:!1,"indicator-color":"#888"}},t._l(t.getCount(e.emoji),(function(o,s){return i("van-swipe-item",{key:s},[i("ul",{staticClass:"EmojiList"},t._l(t.getData(e.emoji,o),(function(o,s){return i("li",{key:s,on:{click:function(i){return t.selectEmoji(e.type,o.id)}}},[i("img",{attrs:{src:"./static/miliao/emoji/"+e.type+"/"+o.id+".gif",alt:o.code}})])})),0)])})),1):t._e()})),i("div",{staticClass:"EmojiTool"},[i("ul",t._l(t.emojiData,(function(e){return i("li",{key:e.type,class:{active:t.emojiType==e.type},on:{click:function(i){t.emojiType=e.type}}},[i("img",{attrs:{src:"./static/miliao/icon/icon-emoji-"+e.type+".svg",height:"24"}})])})),0)])],2)},s=[],a=[{type:"default",emoji:[{id:0,code:"[D:微笑]"},{id:1,code:"[D:嘻嘻]"},{id:2,code:"[D:哈哈]"},{id:3,code:"[D:可爱]"},{id:4,code:"[D:可怜]"},{id:5,code:"[D:挖鼻]"},{id:6,code:"[D:吃惊]"},{id:7,code:"[D:害羞]"},{id:8,code:"[D:挤眼]"},{id:9,code:"[D:闭嘴]"},{id:10,code:"[D:鄙视]"},{id:11,code:"[D:爱你]"},{id:12,code:"[D:泪]"},{id:13,code:"[D:偷笑]"},{id:14,code:"[D:亲亲]"},{id:15,code:"[D:生病]"},{id:16,code:"[D:太开心]"},{id:17,code:"[D:白眼]"},{id:18,code:"[D:右哼哼]"},{id:19,code:"[D:左哼哼]"},{id:20,code:"[D:嘘]"},{id:21,code:"[D:衰]"},{id:22,code:"[D:委屈]"},{id:23,code:"[D:吐]"},{id:24,code:"[D:哈欠]"},{id:25,code:"[D:抱抱]"},{id:26,code:"[D:怒]"},{id:27,code:"[D:疑问]"},{id:28,code:"[D:馋嘴]"},{id:29,code:"[D:拜拜]"},{id:30,code:"[D:思考]"},{id:31,code:"[D:汗]"},{id:32,code:"[D:困]"},{id:33,code:"[D:睡]"},{id:34,code:"[D:钱]"},{id:35,code:"[D:失望]"},{id:36,code:"[D:酷]"},{id:37,code:"[D:色]"},{id:38,code:"[D:哼]"},{id:39,code:"[D:鼓掌]"},{id:40,code:"[D:晕]"},{id:41,code:"[D:悲伤]"},{id:42,code:"[D:抓狂]"},{id:43,code:"[D:黑线]"},{id:44,code:"[D:阴险]"},{id:45,code:"[D:怒骂]"},{id:46,code:"[D:互粉]"},{id:47,code:"[D:心]"},{id:48,code:"[D:伤心]"},{id:49,code:"[D:猪头]"},{id:50,code:"[D:熊猫]"},{id:51,code:"[D:兔子]"},{id:52,code:"[D:ok]"},{id:53,code:"[D:耶]"},{id:54,code:"[D:good]"},{id:55,code:"[D:no]"},{id:56,code:"[D:赞]"},{id:57,code:"[D:来]"},{id:58,code:"[D:弱]"},{id:59,code:"[D:草泥马]"},{id:60,code:"[D:神马]"},{id:61,code:"[D:囧]"},{id:62,code:"[D:浮云]"},{id:63,code:"[D:给力]"},{id:64,code:"[D:围观]"},{id:65,code:"[D:威武]"},{id:66,code:"[D:奥特曼]"},{id:67,code:"[D:礼物]"},{id:68,code:"[D:钟]"},{id:69,code:"[D:话筒]"}]},{type:"qq",emoji:[{id:0,code:"[Q:微笑]"},{id:1,code:"[Q:撇嘴]"},{id:2,code:"[Q:色]"},{id:3,code:"[Q:发呆]"},{id:4,code:"[Q:得意]"},{id:5,code:"[Q:流泪]"},{id:6,code:"[Q:害羞]"},{id:7,code:"[Q:闭嘴]"},{id:8,code:"[Q:睡]"},{id:9,code:"[Q:大哭]"},{id:10,code:"[Q:尴尬]"},{id:11,code:"[Q:发怒]"},{id:12,code:"[Q:调皮]"},{id:13,code:"[Q:呲牙]"},{id:14,code:"[Q:惊讶]"},{id:15,code:"[Q:难过]"},{id:16,code:"[Q:酷]"},{id:17,code:"[Q:冷汗]"},{id:18,code:"[Q:抓狂]"},{id:19,code:"[Q:吐]"},{id:20,code:"[Q:偷笑]"},{id:21,code:"[Q:愉快]"},{id:22,code:"[Q:白眼]"},{id:23,code:"[Q:傲慢]"},{id:24,code:"[Q:饥饿]"},{id:25,code:"[Q:困]"},{id:26,code:"[Q:惊恐]"},{id:27,code:"[Q:流汗]"},{id:28,code:"[Q:憨笑]"},{id:29,code:"[Q:悠闲]"},{id:30,code:"[Q:奋斗]"},{id:31,code:"[Q:咒骂]"},{id:32,code:"[Q:疑问]"},{id:33,code:"[Q:嘘]"},{id:34,code:"[Q:晕]"},{id:35,code:"[Q:疯了]"},{id:36,code:"[Q:哀]"},{id:37,code:"[Q:骷髅]"},{id:38,code:"[Q:敲打]"},{id:39,code:"[Q:再见]"},{id:40,code:"[Q:擦汗]"},{id:41,code:"[Q:抠鼻]"},{id:42,code:"[Q:鼓掌]"},{id:43,code:"[Q:糗大了]"},{id:44,code:"[Q:坏笑]"},{id:45,code:"[Q:左哼哼]"},{id:46,code:"[Q:右哼哼]"},{id:47,code:"[Q:哈欠]"},{id:48,code:"[Q:鄙视]"},{id:49,code:"[Q:委屈]"},{id:50,code:"[Q:快哭了]"},{id:51,code:"[Q:阴险]"},{id:52,code:"[Q:亲亲]"},{id:53,code:"[Q:吓]"},{id:54,code:"[Q:可怜]"},{id:55,code:"[Q:菜刀]"},{id:56,code:"[Q:西瓜]"},{id:57,code:"[Q:啤酒]"},{id:58,code:"[Q:篮球]"},{id:59,code:"[Q:乒乓]"},{id:60,code:"[Q:咖啡]"},{id:61,code:"[Q:饭]"},{id:62,code:"[Q:猪头]"},{id:63,code:"[Q:玫瑰]"},{id:64,code:"[Q:凋谢]"},{id:65,code:"[Q:嘴唇]"},{id:66,code:"[Q:爱心]"},{id:67,code:"[Q:心碎]"},{id:68,code:"[Q:蛋糕]"},{id:69,code:"[Q:闪电]"},{id:70,code:"[Q:炸弹]"},{id:71,code:"[Q:刀]"},{id:72,code:"[Q:足球]"},{id:73,code:"[Q:瓢虫]"},{id:74,code:"[Q:便便]"},{id:75,code:"[Q:月亮]"},{id:76,code:"[Q:太阳]"},{id:77,code:"[Q:礼物]"},{id:78,code:"[Q:拥抱]"},{id:79,code:"[Q:强]"},{id:80,code:"[Q:弱]"},{id:81,code:"[Q:握手]"},{id:82,code:"[Q:胜利]"},{id:83,code:"[Q:抱拳]"},{id:84,code:"[Q:勾引]"},{id:85,code:"[Q:拳头]"},{id:86,code:"[Q:差劲]"},{id:87,code:"[Q:爱你]"},{id:88,code:"[Q:NO]"},{id:89,code:"[Q:OK]"},{id:90,code:"[Q:爱情]"},{id:91,code:"[Q:飞吻]"},{id:92,code:"[Q:跳跳]"},{id:93,code:"[Q:发抖]"},{id:94,code:"[Q:怄火]"},{id:95,code:"[Q:转圈]"},{id:96,code:"[Q:磕头]"},{id:97,code:"[Q:回头]"},{id:98,code:"[Q:跳绳]"},{id:99,code:"[Q:投降]"},{id:100,code:"[Q:激动]"},{id:101,code:"[Q:乱舞]"},{id:102,code:"[Q:献吻]"},{id:103,code:"[Q:左太极]"},{id:104,code:"[Q:右太极]"}]}],d={name:"Emoji",components:{},props:{},data(){return{emojiData:a,emojiType:"default"}},computed:{},watch:{},created(){},mounted(){},activated(){},destroyed(){},methods:{getCount(t){return Math.ceil(t.length/40)},getData(t,e){return t.filter(t=>t.id>40*(e-1)-1&&t.id<40*e)},selectEmoji(t,e){this.$emit("insertHtml",'<img class="emoji" src="./static/miliao/emoji/'+t+"/"+e+'.gif">')}}},l=d,n=i("2877"),c=Object(n["a"])(l,o,s,!1,null,null,null);e["a"]=c.exports}}]);