/* 橘子科技旗下 A4源码  https://an4.net 搭建二开联系 QQ 3479863005  纸飞机联系 @orangetech */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48ff3236"],{"4ebf":function(t,a,e){},8496:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"PageBox",style:1==t.infoData.o_status||2==t.infoData.o_status?"padding-bottom: 64px":""},[t.infoData?e("div",{staticClass:"ScrollBox"},[e("div",{staticClass:"Details",staticStyle:{"font-size":"14px",color:"Black"}},[e("img",{staticClass:"StateIcon",attrs:{src:"./static/icon/state"+t.infoData.o_status+".png",height:"90"}}),e("dl",{staticStyle:{"box-shadow":"rgba(0, 0, 9, 0.2) 0px 1px 16px 0px","border-radius":"10px","margin-bottom":"0px","margin-top":"5px"}},[e("dd",[e("label",[t._v("任务标题：")]),e("span",[t._v(t._s(t.infoData.title))])]),e("dd",[e("label",[t._v("任务收益：")]),e("span",[e("i",[t._v("+"+t._s(t.infoData.reward_price))]),t._v("元")])]),e("dd",[e("label",[t._v("任务描述：")]),e("span",[t._v(t._s(t.infoData.content))])]),1==t.infoData.o_status?e("dd",[e("label",[t._v("提交样例：")]),e("van-uploader",{attrs:{"after-read":t.afterRead,"max-count":"3"},model:{value:t.exampleImg,callback:function(a){t.exampleImg=a},expression:"exampleImg"}})],1):e("dd",[e("label",[t._v("提交样例：")]),t.infoData.o_examine_demo.length?e("div",t._l(t.infoData.o_examine_demo,(function(a,i){return e("van-image",{key:i,attrs:{fit:"cover",width:"49",height:"49",src:""+t.ApiUrl+a},on:{click:function(e){return t.$ImagePreview([""+t.ApiUrl+a])}}})})),1):e("span",[t._v("用户未提交样例")])]),1!=t.infoData.o_status&&2!=t.infoData.o_status&&6!=t.infoData.o_status?e("dd",[e("label",[t._v("审核说明：")]),e("span",[t._v(t._s(t.infoData.handle_remarks))])]):t._e(),6!=t.infoData.o_status?e("dd",[e("label",[t._v("审核日期：")]),e("span",[t._v(t._s(t.infoData.handle_time))])]):t._e()]),e("dl",{staticStyle:{"border-top":"10px #eee solid"}},[e("dt",{staticStyle:{"justify-content":"flex-start"}},[e("label",[e("img",{staticStyle:{"border-radius":"100%","vertical-align":"middle","margin-right":"10px"},attrs:{src:"./static/head/"+t.infoData.f_header,height:"40"}})]),e("span",[e("p",[t._v("需求方")]),e("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[t._v(t._s(t.infoData.f_username)+" "),e("em",{staticStyle:{color:"#999","font-size":"12px"}},[t._v(t._s(t.infoData.add_time)+" 发布")])])])]),e("dd",{staticStyle:{"border-top":"1px #eee solid","padding-top":"13px"}},[e("input",{staticClass:"link",attrs:{id:"AppLink",type:"text",readonly:""},domProps:{value:t.infoData.link_info}}),e("span",{staticStyle:{position:"absolute",opacity:"0"},attrs:{id:"IosLink"}},[t._v(t._s(t.infoData.link_info))]),e("div",[e("van-button",{attrs:{block:"",size:"mini",plain:"",type:"info",round:""},on:{click:function(a){return t.$Util.CopyText("IosLink","AppLink")}}},[t._v("复制")]),e("van-button",{staticStyle:{margin:"5px 0 0"},attrs:{block:"",size:"mini",plain:"",type:"danger",round:""},on:{click:function(a){return t.$Util.OpenUrl(t.infoData.link_info)}}},[t._v("跳转")])],1)])])]),e("van-tabs",{staticStyle:{"border-top":"10px #eee solid"},attrs:{border:!1,color:"#dd6161","title-active-color":"#dd6161"}},[e("van-tab",{attrs:{title:"任务步骤"}},t._l(t.infoData.task_step,(function(a,i){return e("dl",{key:i},[e("dt",[e("label",[t._v("第"+t._s(i+1)+"步：")]),e("span",[t._v(t._s(a.describe))])]),e("dd",[e("van-image",{attrs:{fit:"cover",src:""+t.ApiUrl+a.img},on:{click:function(e){return t.$ImagePreview([""+t.ApiUrl+a.img])}}})],1)])})),0),e("van-tab",{attrs:{title:"审核样例"}},[t.infoData.examine_demo?e("div",{staticStyle:{"text-align":"center"}},t._l(t.infoData.examine_demo,(function(a,i){return e("van-image",{key:i,attrs:{fit:"cover",src:""+t.ApiUrl+a},on:{click:function(e){return t.$ImagePreview([""+t.ApiUrl+a])}}})})),1):e("van-empty",{attrs:{image:"error",description:"无审核样例"}})],1)],1)],1):t._e(),t.isLoad?e("van-loading",{staticClass:"DataLoad",attrs:{size:"60px",vertical:""}},[t._v("数据加载中...")]):t._e(),1==t.infoData.o_status||2==t.infoData.o_status?e("div",{staticStyle:{position:"fixed",bottom:"0",width:"100%",display:"flex","align-items":"center","justify-content":"space-between",padding:"10px 5px"}},[e("van-button",{staticStyle:{"font-size":"16px",margin:"0 5px"},attrs:{block:"",color:"#aaa"},on:{click:t.cancelTask}},[t._v("放弃任务")]),1==t.infoData.o_status?e("van-button",{staticStyle:{"font-size":"16px",margin:"0 5px"},attrs:{block:"",type:"danger"},on:{click:t.submitTask}},[t._v("提交完成任务")]):t._e()],1):t._e()],1)},s=[],n={name:"Show",components:{},props:["taskId"],data(){return{isLoad:!0,infoData:"",exampleImg:[]}},computed:{},watch:{},created(){this.$parent.navBarTitle="任务详情",this.getTaskinfo()},mounted(){},activated(){},destroyed(){},methods:{getTaskinfo(){this.$Model.TaskOrderInfo(this.taskId,t=>{this.isLoad=!1,1==t.code&&(this.infoData=t.info)})},submitTask(){if(this.exampleImg.length){const t=this.exampleImg.flatMap(t=>t.url);this.$Model.SubmitTask({order_id:this.taskId,examine_demo:t},t=>{1==t.code&&this.getTaskinfo()})}else this.$Dialog.Toast("请上传完成任务图片")},cancelTask(){this.$Model.SubmitTask({order_id:this.taskId,status:6},t=>{1==t.code&&this.getTaskinfo()})},afterRead(t){t.status="uploading",t.message="上传中...",this.uploadImgs(t)},uploadImgs(t){if(!t.file.type.match(/image/))return t.status="failed",void(t.message="错误格式");this.$Util.CompressImg(t.file.type,t.content,750,a=>{let e=new FormData;e.append("token",localStorage["Token"]),e.append("type",3),e.append("image",a,t.file.name),this.$Model.UploadImg(e,a=>{1==a.code?(t.message="上传成功",t.status="success",t.url=a.url):(t.status="failed",t.message="上传失败")})})}}},o=n,l=(e("ebbe"),e("2877")),r=Object(l["a"])(o,i,s,!1,null,"5b0d0dbe",null);a["default"]=r.exports},ebbe:function(t,a,e){"use strict";var i=e("4ebf"),s=e.n(i);s.a}}]);