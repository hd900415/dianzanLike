/* 橘子科技旗下 A4源码  https://an4.net 搭建二开联系 QQ 3479863005  纸飞机联系 @orangetech */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43b5e731"],{"17e4":function(t,a,s){"use strict";var e=s("c7f6"),i=s.n(e);i.a},"968b":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"PageBox"},[s("div",{staticClass:"ScrollBox Wallet"},[s("div",{staticClass:"balance"},[t._v(t._s(t.UserInfo.balance))]),s("div",{staticClass:"tool",staticStyle:{"box-shadow":"0 1px 16px 0 rgba(6,0,0,.2)","font-size":"13px","text-align":"center","border-radius":"0 0 100% 100%",background:"linear-gradient(#dd6161, #dd6161)",height:"90px","padding-top":"0px",color:"#dd6161","font-weight":"500"}},[s("div",[s("router-link",{attrs:{to:"/user/recharge"}},[t._v("充值")]),s("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.goTurn("draw")}}},[t._v("提现")])],1)]),s("van-tabs",{attrs:{type:"card",background:"#eeeeef",border:!1,color:"#fff","title-active-color":"#dd6161","title-inactive-color":"#666"},on:{change:t.changeTabs},model:{value:t.tabsIndex,callback:function(a){t.tabsIndex=a},expression:"tabsIndex"}},t._l(t.taskTabs,(function(a,e){return s("van-tab",{key:e,staticStyle:{padding:"0 12px"},attrs:{title:a.text}},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefresh,callback:function(a){t.isRefresh=a},expression:"isRefresh"}},[s("van-list",{class:{Empty:!t.listData[t.tabsIndex].length},attrs:{finished:t.isFinished,"finished-text":t.listData[t.tabsIndex].length?"没有更多数据了":"没有数据"},on:{load:t.onLoad},model:{value:t.isLoad,callback:function(a){t.isLoad=a},expression:"isLoad"}},[0==t.tabsIndex||1==t.tabsIndex?s("div",t._l(t.listData[t.tabsIndex],(function(a,e){return s("van-cell",{key:a.dan,staticClass:"FundItem",attrs:{border:!1},on:{click:function(s){return t.openInfo(a.dan)}},scopedSlots:t._u([{key:"title",fn:function(){return[s("div",[s("span",[t._v(t._s(a.dan))]),s("span",[t._v(t._s(a.adddate))])]),s("div",[s("span",{staticClass:"money"},[t._v(t._s(Number(a.money)))]),s("span",[t._v(t._s(a.status_desc))])])]},proxy:!0}],null,!0)},[s("div",{class:"icon tag"+t.tabsIndex,attrs:{slot:"icon"},slot:"icon"},[t._v(" "+t._s(0==t.tabsIndex?"充":"提")+" ")])])})),1):s("div",t._l(t.listData[t.tabsIndex],(function(a,e){return s("van-cell",{key:a.order_id,staticClass:"FundItem",attrs:{border:!1},scopedSlots:t._u([{key:"title",fn:function(){return[s("div",[s("span",[t._v(t._s(a.trade_number))]),s("span",[t._v(t._s(a.trade_time))])]),s("div",[s("span",{staticClass:"money"},[t._v(t._s(a.jj)+t._s(a.trade_amount))]),s("span",[t._v(t._s(a.remarks))])])]},proxy:!0}],null,!0)},[s("div",{class:"icon tag"+t.tabsIndex,attrs:{slot:"icon"},slot:"icon"},[t._v(" 转 ")])])})),1)])],1)],1)})),1)],1),s("van-action-sheet",{attrs:{title:"转账","close-on-popstate":""},model:{value:t.showTurn,callback:function(a){t.showTurn=a},expression:"showTurn"}},[s("van-field",{staticStyle:{height:"0",width:"0",padding:"0",position:"absolute"},attrs:{type:"password",autocomplete:"off"}}),s("van-field",{attrs:{type:"text",label:"转账目标",placeholder:"请输入转入用户",clearable:"",size:"large"},model:{value:t.turnData.username,callback:function(a){t.$set(t.turnData,"username","string"===typeof a?a.trim():a)},expression:"turnData.username"}}),s("van-field",{attrs:{type:"number",label:"转账金额",placeholder:"请输入转账金额",clearable:"",size:"large"},model:{value:t.turnData.turn_money,callback:function(a){t.$set(t.turnData,"turn_money","string"===typeof a?a.trim():a)},expression:"turnData.turn_money"}}),s("van-field",{attrs:{type:"password",label:"资金密码",placeholder:"请输入资金密码",clearable:"",size:"large"},model:{value:t.turnData.drawword,callback:function(a){t.$set(t.turnData,"drawword","string"===typeof a?a.trim():a)},expression:"turnData.drawword"}}),s("div",{staticStyle:{padding:"16px"}},[s("van-button",{staticStyle:{"font-size":"16px"},attrs:{type:"danger",block:""},on:{click:t.submitTurn}},[t._v("提交")])],1)],1),s("van-action-sheet",{attrs:{title:"提现","close-on-popstate":""},model:{value:t.showDraw,callback:function(a){t.showDraw=a},expression:"showDraw"}},[s("van-field",{staticStyle:{height:"0",width:"0",padding:"0",position:"absolute"},attrs:{type:"password",autocomplete:"off"}}),s("van-field",{attrs:{type:"text",label:"提现方式",placeholder:"选择提现方式",size:"large",readonly:""},on:{click:function(a){t.showPicker=!0}},model:{value:t.selectBank,callback:function(a){t.selectBank=a},expression:"selectBank"}}),s("van-field",{attrs:{type:"number",label:"提现金额",placeholder:"请输入提现金额",clearable:"",size:"large"},model:{value:t.drawData.draw_money,callback:function(a){t.$set(t.drawData,"draw_money","string"===typeof a?a.trim():a)},expression:"drawData.draw_money"}}),s("van-field",{attrs:{type:"password",label:"资金密码",placeholder:"请输入资金密码",clearable:"",size:"large"},model:{value:t.drawData.drawword,callback:function(a){t.$set(t.drawData,"drawword","string"===typeof a?a.trim():a)},expression:"drawData.drawword"}}),s("div",{staticStyle:{padding:"0 16px",margin:"16px 0"}},[s("van-button",{staticStyle:{"font-size":"16px"},attrs:{type:"danger",block:""},on:{click:t.submitDraw}},[t._v("提交")])],1),t.InitData.setting.info_w?s("van-divider",{staticStyle:{"line-height":"1.2"}},[t._v(t._s(t.InitData.setting.info_w))]):t._e()],1),s("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(a){t.showPicker=a},expression:"showPicker"}},[s("van-picker",{attrs:{"show-toolbar":"",columns:t.cardList},on:{confirm:t.onConfirm,cancel:function(a){t.showPicker=!1}}})],1)],1)},i=[],n={name:"Wallet",components:{},props:["walletType"],data(){return{listData:"",isLoad:!1,isFinished:!1,isRefresh:!1,pageNo:1,tabsState:1,tabsIndex:0,taskTabs:[{type:1,text:"充值记录"},{type:3,text:"提现记录"}],showTurn:!1,showDraw:!1,showPicker:!1,selectBank:"",isSubmit:!1,turnData:{username:"",turn_money:"",drawword:""},drawData:{draw_type:"bank",user_bank_id:"",draw_money:"",drawword:""},selectBank:""}},computed:{cardList(){let t=this.$store.state.BankCardList.flatMap(t=>t.bank_name+" "+t.card_no.replace(/^(.{4}).*(.{4})$/,"$1 **** $2"));return this.UserInfo.alipay&&t.unshift("支付宝 "+this.UserInfo.alipay.replace(/^(.{4}).*(.{4})$/,"$1 **** $2")),t}},watch:{$route(){this.walletType?(this.tabsIndex=this.taskTabs.findIndex(t=>t.type==this.walletType),this.tabsState=this.walletType):(this.tabsState=1,this.tabsIndex=0),this.getListData("init")}},created(){this.$Model.GetBankCardList(),this.$parent.navBarTitle="我的钱包",this.listData=this.taskTabs.flatMap(t=>[""]),this.walletType&&(this.tabsIndex=this.taskTabs.findIndex(t=>t.type==this.walletType),this.tabsState=this.walletType),this.getListData("init"),this.drawData.draw_money=Number(this.InitData.setting.min_w||100)},mounted(){},activated(){},destroyed(){},methods:{goTurn(t){1!=this.UserInfo.is_fund_password?this.$Dialog.Alert("你还未设置资金密码，请先设置",()=>{this.$router.push("/user/info")}):"turn"==t?this.showTurn=!0:this.cardList.length?this.showDraw=!0:this.$Dialog.Alert("你还未绑定银行卡或支付宝，请先绑定",()=>{this.$router.push("/user/bankCard")})},openInfo(t){0==this.tabsIndex&&this.$router.push("/user/recharge/"+t)},onConfirm(t,a){0==a&&this.UserInfo.alipay?(this.drawData.draw_type="alipay",this.drawData.user_bank_id=this.UserInfo.alipay):(a=this.UserInfo.alipay?a-1:a,this.drawData.draw_type="bank",this.drawData.user_bank_id=this.$store.state.BankCardList[a].id),this.selectBank=t,this.showPicker=!1},submitDraw(){this.drawData.user_bank_id?this.drawData.draw_money?this.drawData.drawword?(this.isSubmit=!0,this.$Model.Draw(this.drawData,t=>{this.isSubmit=!1,1==t.code&&(this.showDraw=!1,this.drawData={draw_type:"bank",user_bank_id:"",draw_money:100,drawword:""},this.getListData("init"))})):this.$Dialog.Toast("请输入支付密码"):this.$Dialog.Toast("请输入提现金额"):this.$Dialog.Toast("请选择银行卡")},submitTurn(){this.turnData.username?this.turnData.turn_money?this.turnData.drawword?(this.isSubmit=!0,this.$Model.Transfer(this.turnData,t=>{this.isSubmit=!1,1==t.code&&(this.showTurn=!1,this.turnData={username:"",turn_money:"",drawword:""},this.getListData("init"))})):this.$Dialog.Toast("请输入支付密码"):this.$Dialog.Toast("请输入转账金额"):this.$Dialog.Toast("请输入转入用户")},onLoad(){this.getListData("load")},changeTabs(t){this.tabsState=this.taskTabs[t].type,this.getListData("init")},getListData(t){this.isLoad=!0,this.isRefresh=!1,"load"==t?this.pageNo+=1:(this.pageNo=1,this.isFinished=!1),0==this.tabsIndex?this.$Model.GetRechargeRecord({state:0,page_no:this.pageNo},a=>{this.isLoad=!1,1==a.code?(this.listData[this.tabsIndex]="load"==t?this.listData[this.tabsIndex].concat(a.info):a.info,this.pageNo==a.data_total_page?this.isFinished=!0:this.isFinished=!1):(this.listData[this.tabsIndex]="",this.isFinished=!0)}):1==this.tabsIndex?this.$Model.GetDrawRecord({state:0,page_no:this.pageNo},a=>{this.isLoad=!1,1==a.code?(this.listData[this.tabsIndex]="load"==t?this.listData[this.tabsIndex].concat(a.info):a.info,this.pageNo==a.data_total_page?this.isFinished=!0:this.isFinished=!1):(this.listData[this.tabsIndex]="",this.isFinished=!0)}):this.$Model.FundDetails({trade_type:11,page_no:this.pageNo},a=>{this.isLoad=!1,1==a.code?(this.listData[this.tabsIndex]="load"==t?this.listData[this.tabsIndex].concat(a.list):a.list,this.pageNo==a.data_total_page?this.isFinished=!0:this.isFinished=!1):(this.listData[this.tabsIndex]="",this.isFinished=!0)})},onRefresh(){this.getListData("init")}}},r=n,o=(s("17e4"),s("2877")),l=Object(o["a"])(r,e,i,!1,null,"7a1da63a",null);a["default"]=l.exports},c7f6:function(t,a,s){}}]);